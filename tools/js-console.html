<!DOCTYPE html>
<html>
  <head>
    <title>HTML + Javascript D3 (v3) sandbox</title>
    <script src="https://d3js.org/d3.v3.min.js"></script>
  </head>
<body style="background-color: white;">
<h1>HTML + Javascript D3 (v3) sandbox</h1>


<form>
  <h2>HTML</h2>
  <textarea id="HTML" rows="10" style="width: 85%;"><svg style="width: 500px; height: 500px; border: 1px lightgray solid"></svg></textarea>
  
  <h2>Javascript</h2>
  <textarea id="JS" rows="10" style="width: 85%;">
d3.csv("https://gist.githubusercontent.com/curran/a08a1080b88344b0c8a7/raw/0e7a9b0a5d22642a06d3d5b9bcbad9890c8ee534/iris.csv", function (data) {
        const svg = d3.select("svg");
        svg
          .append("circle")
          .attr("cx", 50)
          .attr("cy", 50)
          .attr("r", 20)
          .attr("fill", "blue")
          .transition()
          .duration(2000)
          .attr("cx", 150)
          .attr("cy", 150)
          .attr("fill", "purple");
      });
  </textarea>

  <p><input type="button"
         onClick="execute(document.querySelector('textarea#HTML').value);"
         value="Run" style="width: 10%;"></input><input type="reset"
         style="width: 10%;" value="Reset"></input></p>
</form>

<h2>Output</h2>
<div id="demo"></div>

<script>
  function execute(cmd) {
      document.getElementById("demo").innerHTML = cmd;
       eval(document.querySelector('textarea#JS').value);
  }

  const input = document.querySelector("input#query");
  input.addEventListener("keydown", updateValue);

  function updateValue(e) {
      if ((e && e.keyCode == 13) || e == 0) {
          e.preventDefault();
          document.querySelector("input[type=button]").click();
      }
  }
</script>

</body>
</html>
